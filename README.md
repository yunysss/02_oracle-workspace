# Oracle
## 1. SELECT (기본문법)
### 1_1. 주요 용어

![Untitled](https://user-images.githubusercontent.com/115604544/202937750-91140a39-498b-4c4b-9bf4-ab98d45496ec.png)

① 행 (Row), 튜플　　　　② 컬럼 , 도메인　　　③ 기본키 (Primary Key) : 행을 구별해주는 식별자   
④ 외래키 (Foreign Key)　⑤ Null : 비어있음　　⑥ 컬럼값 , 속성값
### 1_2. 데이터타입

![Untitled](https://user-images.githubusercontent.com/115604544/202938053-c0ec82fd-b8b7-4363-ab01-d31a0839bedf.png)

### 1_3. SQL (Structured Query Language)

![제목 없음](https://user-images.githubusercontent.com/115604544/202938075-08150bf7-c074-4b60-a1bf-85bffbaae3a3.jpg)
### 1_4. SELECT문이란?
- 데이터 조회할 때 사용되는 구문
- RESULT SET : SELECT문에 의해 조회된 결과물 (조회된 행들의 집합)
- oracle의 예약어, 테이블명, 컬럼명 대소문자 가리지 않음 (소문자도 정상적으로 실행)
```
SELECT 조회하고자하는 컬럼, 컬럼, ...
FROM 테이블명;
```
### 1_4. 컬럼값을 통한 산술연산
- SELECT절 컬럼명 작성부분에 산술연산식 기술 가능 (=> 해당 컬럼값이 산술연산된 결과로 조회)
- 산술연산 과정 중 NULL이 존재할 경우 산술연산 결과값 마저도 무조건 NULL로 나옴
- DATE 형식끼리도 연산 가능
- DATE - DATE : 결과값은 일 단위
### 1_5. 컬럼별 별칭 지정
```
컬럼명 별칭 / 컬럼명 AS 별칭 / 컬럼명 "별칭" / 컬럼명 AS "별칭"
```
- 조회시 컬럼명 또는 산술식 뒤에 별칭 부여
- AS 여부와 상관 없이 별칭에 띄어쓰기 또는 특수문자가 포함될 경우 반드시 쌍따옴표로 묶어서 표기
### 1_6. 리터럴
- 임의로 지정한 문자열('')
- SELECT절에 리터럴을 제시하면 마치 테이블상에 존재하는 테이블처럼 조회 가능
- 조회된 RESULT SET의 모든 행에 반복적으로 같이 출력
```SQL
SELECT EMP_ID, EMP_NAME, SALARY, '원' AS 단위
FROM EMPLOYEE;
```

![Untitled](https://user-images.githubusercontent.com/115604544/202938654-2925db15-42cc-4af9-8b23-43cec2fe50d8.png)

### 1_7. 연결 연산자 : ||
- 여러 컬럼값들을 마치 하나의 컬럼인 것처럼 연결하거나, 컬럼값과 리터럴을 연결할 수 있음
- JAVA에서 System.out.println("num : " + num); 과 비슷
### 1_8. DISTINCT
- 컬럼에 중복된 값들은 한번씩만 조회하고자 할 때 사용
```
SELECT DISTINCT 칼럼, ...
FROM 테이블명; 
```
- 유의 사항
  - DISTINCT는 SELECT절에 딱 한번만 기술 가능
  - DISTINCT 칼럼명1, 칼럼명2, …와 같이 기술할 경우 (칼럼1, 칼럼2, …) 쌍으로 묶여서 중복 판별
### 1_9. WHERE 절
```
SELECT 조회하고자 하는 컬럼명, 컬럼명, 산술연산 AS 별칭, ...
FROM 테이블명
WHERE 조건식;
```
- 조회하고자하는 테이블로부터 특정 조건에 만족하는 데이터만을 조회하고자 할 때 WHERE절에 조건식 제시
- WHERE 절에서는 SELECT절에 부여한 별칭 사용 불가 (실행순서 : FROM절 => WHERE절 => SELECT절)
- 비교연산자   
  < , >, <=, >=　　　　--> 대소비교   
  =　　　　　　　　　--> 같은지 비교   
  !=, ^=, <>　　　　　--> 같지 않은지 비교   
- 논리연산자
  - 여러개의 조건을 엮어서 제시하고자 할 때 사용   
  AND (~이면서, 그리고)   
  OR  (~이거나, 또는)
- BETWEEN AND
  - 몇 이상 몇 이하인 범위에 대한 조건을 제시할 때 사용되는 연산자
  ```
  비교대상컬럼 BETWEEN 하한값 AND 상한값
  ```
- NOT : 논리부정연산자 (자바에서의 !와 같은 존재) => 컬럼명 앞 또는 BETWEEN 앞에 기입
- DATE 타입끼리도 대소비교 연산 가능
- LIKE
  - 비교하고자하는 컬럼값이 내가 제시한 특정 패턴에 만족될 경우 조회
  ```
  비교대상컬럼 LIKE '특정패턴’
  ```
  - 특정패턴 제시시 '%', '_'를 사용 (와일드카드)
    - '%' : 0글자 이상   
      EX) 비교대상컬럼 LIKE '문자%'   => 비교대상의 컬럼값이 해당 문자로 "시작"될 경우 조회   
      비교대상컬럼 LIKE '%문자'   => 비교대상의 컬럼값이 해당 문자로 "끝"날 경우 조회   
      비교대상컬럼 LIKE '%문자%'  => 비교대상의 컬럼값에 해당 문자가 "포함"되어 있을 경우 조회 (키워드 검색**)   
    - '_' : 1글자   
      EX) 비교대상컬럼 LIKE '_문자'   => 비교대상의 컬럼값이 어떠한 "한 글자" 뒤에 해당 문자가 올 경우 조회   
      비교대상컬럼 LIKE '__문자'  => 비교대상의 컬럼값이 어떠한 "두 글자" 뒤에 해당 문자가 올 경우 조회   
  - 와일드 카드 문자와 패턴의 특수문자가 동일한 경우 다 와일드카드로 인식   
    => 데이터값으로 취급하고자하는 값 앞에 나만의 와일드 카드를 제시하고 ESCAPE OPTION으로 등록
    ```SQL
    SELECT EMP_ID, EMP_NAME, EMAIL
    FROM EMPLOYEE
    WHERE EMAIL LIKE '___$_%' ESCAPE '$';
    ```
  - NOT은 컬럼명 앞 또는 LIKE 앞에 기입 가능
- IS NULL / IS NOT NULL : 컬럼값에 NULL이 있을 경우 NULL값 비교할때 사용되는 연산자
- IN : 비교대상컬럼값이 내가 제시한 목록중에 일치하는 값이 있는지
  ```
  비교대상컬럼 IN ('값1', '값2', '값3', ...)
  ```
- 연산자 우선순위   
  0 ()   
  1 산술연산자   
  2 연결연산자   
  3 비교연산자   
  4 IS NULL / LIKE '특정패턴' / IN   
  5 BETWEEN AND   
  6 NOT(논리연산자)   
  7 AND(논리연산자)   
  8 OR(논리연산자)   
### 1_10. ORDER BY 절
- SELECT문 가장 마지막 줄에 작성되고 마지막에 실행
```
SELECT 조회할칼럼, 컬럼, 산술연산식 [AS] "별칭", …
FROM 조회하고자하는테이블명
WHERE 조건식
ORDER BY 정렬기준의컬럼명|별칭|컬럼순번   [ASC|DESC]  [NULLS FIRST|NULLS LAST]
```
- ASC : 오름차순 정렬 (생략시 기본값)
- DESC : 내림차순 정렬
- NULLS FIRST : 정렬하고자하는 컬럼값에 NULL이 있을 경우 해당 데이터를 앞에 배치 (생략시 DESC일 때의 기본값)
- NULLS LAST : 정렬하고자하는 컬럼값에 NULL이 있을 경우 해당 데이터를 뒤에 배치 (생략시 ASC일 때의 기본값)
- 여러개 제시 가능 (첫번째 기준의 컬럼값이 동일할 경우 두번째 기준의 컬럼가지고 정렬...)
- 산술연산식 가능
- 별칭 사용 가능
- 컬럼 순번 사용 가능
## 2. SELECT (함수)
### 2_1. 함수 FUNCTION
- 전달된 컬럼값을 읽어들여서 함수를 실행한 결과를 반환
- 단일행 함수 : N개의 값을 읽어들여서 N개의 결과값을 반환 (매 행마다 함수 실행 결과 반환)
- 그룹 함수 : N개의 값을 읽어들여서 1개의 결과값을 반환 (그룹을 지어 그룹별로 함수 실행 결과 반환)
- SELECT절 단일행함수랑 그룹함수를 함께 기술하지 못함! => 결과 행의 갯수가 다르기 때문
- 함수식을 기술할 수 있는 위치 : SELECT절, WHERE절, ORDER BY절, GROUP BY절, HAVING절, DML문
### 2_2. 단일행 함수
#### 2_2_1. 문자 처리 함수
```
LENGTH('문자열값' | 컬럼) : 해당 문자열값의 글자수 반환
LENGTHB('문자열값' | 컬럼) : 해당 문자열값의 바이트수 반환
```
- LENGTH / LENGTHB
  - 결과값 NUMBER타입   
  - 한글 한글자당 3BYTE   
  - 영문자, 숫자, 특수문자 한글자당 1BYTE   
```
INSTR(컬럼 | '문자열값', '찾고자하는문자', [ 찾을위치의 시작값, [ 순번 ] ]) 
```
- INSTR : 문자열로부터 특정 문자의 시작위치를 찾아서 반환
  - 결과값 NUMBER타입
  - 찾을위치의 시작값
    - 1 : 앞에서부터 탐색
    - -1 : 뒤에서부터 탐색
  - 찾을위치의시작값 1기본값, 순번 1기본값
  - 찾지 못할 경우 0 반환
```
SUBSTR(STRING, POSITION, [ LENGTH ])
```
- SUBSTR
  - 문자열에서 특정 문자열을 추출해서 반환 (자바에서의 substring()메소드와 유사)
  - 결과값 CHARACTER타입
  - STRING : 문자타입의 컬럼 또는 '문자열'
  - POSITION : 문자열을 추출할 시작위치값 (음수값도 제시가능)
  - LENGTH : 추출할 문자 개수 (생략시 끝까지 의미)
```
LPAD/RPAD(STRING, 최종적으로반환할문자의길이(N), [덧붙이고자하는문자])
```
- LPAD / RPAD
  - 문자열에 덧붙이고자하는 문자를 왼쪽 또는 오른쪽에 덧붙여서 최종 N길이(바이트수)만큼의 문자열 반환
  - 결과값 CHARACTER타입
  - 덧붙이고자 하는 문자 생략시 기본값 공백
```
LTRIM/RTRIM(STRING, [제거하고자하는문자들])
```
- LTRIM / RTRIM
  - 결과값 CHARACTER타입
  - 제거하고자하는문자 생략시 기본값 공백
  - 제거하고자하는 문자들 순서 상관없이 만나면 제거됨
```
TRIM( [ [ LEADING/TRAILING/BOTH ] 제거하고자하는문자들 FROM ] STRING)
```
- TRIM
  - 문자열의 앞/뒤/양쪽에 있는 지정한 문자들을 제거한 나머지 반환
  - LEADING : 앞 ⇒ LTRIM
  - TRAILING : 뒤 ⇒ RTRIM
  - BOTH : 양쪽 ⇒ 생략시 기본값
```
LOWER/UPPER/INITCAP(STRINR)
```
- LOWER / UPPER / INITCAP
  - 결과값 CHARACTER타입
  - LOWER : 다 소문자로 변경
  - UPPER : 다 대문자로 변경
  - INITCAP : 단어 앞글자마다 대문자로 변경
    - 공백 단위로 한 단어로 인식
```
CONCAT(STRING, STRING)
```
- CONCAT
  - 문자열 두 개 전달받아 하나로 합친 결과 반환
  - 결과값 CHARACTER타입
  - 세 개 이상의 문자열은 연결 연산자 이용
```
REPLACE(STRING, STR1, STR2)
```
- REPLACE
  - 결과값 CHARACTER타입
  - 실제 데이터값 변경 X
#### 2_2_2. 숫자 처리 함수
```
ABS(NUMBER)
```
- ABS
  - 숫자의 절대값을 구해주는 함수
  - 결과값 NUMBER타입
 ```
 MOD(NUMBER, NUMBER)   
 ```
- MOD
  - 두 수를 나눈 나머지값을 반환해주는 함수 (오라클에는 % 연산자 없음)
  - 결과값 NUMBER타입
```
ROUND(NUMBER, [ 위치 ])
```
- ROUND
  - 반올림처리 함수
  - 결과값 NUMBER타입
  - 위치 : 어느 위치까지 표시할 것인지 제시    
    EX) 1  2  3  .  4  5  6    
    　-2 -1  0　1  2  3   
  - 위치 생략시 기본값 0
```
CEIL(NUMBER)
```
- CEIL
  - 올림처리 함수 (위치 지정 불가능)
  - 소수점 아래 작은 값이라도 있으면 올림처리 / 0이면 올림X
```
FLOOR(NUMBER)
```
- FLOOR : 소수점 아래 버림처리 함수 (위치 지정 불가능)
```
TRUNC(NUMBER, [ 위치 ])
```
- TRUNC : 위치 지정 가능한 버림처리 함수
#### 2_2_3. 날짜 처리 함수
- SYSDATE : 현재 시스템 날짜 및 시간 반환
- MONTHS_BETWEEN(DATE1, DATE2)
  - 두 날짜 사이의 개월 수 ⇒ 내부적으로 DATE1 - DATE2 후 나누기 30, 31이 진행
  - 결과값 NUMBER타입
  - DATE1에 더 최근 날짜 작성
- ADD_MONTHS(DATE, NUMBER) 
  - 특정 날짜에 해당 숫자만큼의 개월수를 더해서 그 날짜 리턴
  - 결과값 DATE타입
- NEXT_DAY(DATE, 요일(문자 | 숫자) 
  - 특정 날짜 이후에 가까운 해당 요일의 날짜를 반환해주는 함수
  -결과값 DATE타입
  - 한글 설정일 때 요일은 ‘월요일’ 또는 ‘월’로 제시 가능
  - 1:일요일, 2:월요일, 3:화요일, 4:수요일, 5:목요일, 6:금요일, 7:토요일
- LAST_DAY(DATE)
  - 해당 월의 마지막 날짜를 구해서 반환
  - 결과값 DATE타입
- EXTRACT(YEAR | MONTH | DAY FROM DATE)
  - 특정 날짜로부터 년도/월/일 만 추출해서 반환하는 함수
  - 결과값 NUMBER타입
#### 2_2_4. 형변환 함수
```
TO_CHAR(숫자 | 날짜, [ 포맷 ])
```
- TO_CHAR
  - 숫자 타입 또는 날짜 타입의 값을 문자 타입으로 변환시켜주는 함수
  - 결과값 CHARACTER타입
  - 숫자 ⇒ 문자
    - 9 : 갯수만큼 공간 확보, 오른쪽 정렬, 빈칸 공백으로 채움
    - 0 : 갯수만큼 공간 확보, 오른쪽 정렬, 빈칸 0으로 채움
    - L : LOCAL ⇒ 현재 설정된 나라의 화폐단위 (’$’로 표현하고 싶으면 $쓰면 됨)
    - fm : NUMBER타입의 공백을 없앨 때
  - 날짜 ⇒ 문자타입
    - 기본 : ‘YY/MM/DD’
    - AM | PM : 현재 시간의 오전/오후
    - HH : 12시간 형식 시
    - HH24 : 24시간 형식 시
    - MI : 분
    - fm : DATE타입의 0을 없앨 때 (단, fm이 붙은 자리 이후에 모두 적용)
  - 년도 관련 포맷
    - YYYY : 네 자리 년도
    - YY : 두 자리 년도 ⇒ 무조건 현재 세기로 반영
    - RRRR : 두 자리 년도
    - RR : 두 자리 년도 ⇒ 해당 두 자리 년도가 50미만일 경우 현재 세기로 반영, 50이상일 경우 이전 세기로 반영
    - YEAR : 영문 년도
  - 월 관련 포맷
    - MM : 두 자리 월
    - MON : 두 자리 월 + ‘월’
    - MONTH : 두 자리 월 + ‘월’
    - RM : 로마기호 월
  - 일 관련 포맷
    - DDD : 년 (1월 1일) 기준 몇 일 째
    - DD : 월 기준 몇 일 째
    - D : 주 기준 (일요일 시작) 몇 일 째 (1~7, 일~토)
  - 요일 관련 포맷
    - DAY : 요일
    - DY : 요일 약어
  - 포맷 내 정해진 포맷, 특수문자 외의 임의의 문자열 값 쓰고자 할 경우 ""로 묶어서 표현
    ```SQL
    SELECT EMP_NAME, TO_CHAR(HIRE_DATE, 'YYYY"년" MM"월" DD"일" (DY)')
    FROM EMPLOYEE;
    ```
    
    ![Untitled](https://user-images.githubusercontent.com/115604544/202944682-7ef7643d-f9eb-42be-8932-df2f851e6a9f.png)

```
TO_DATE(숫자 | 문자, [ 포맷 ])
```
- TO_DATE
  - 숫자 타입 또는 문자 타입 데이터를 날짜 타입으로 변환시켜주는 함수
  - 결과값 DATE타입
  - 숫자 : 8자리 혹은 6자리 숫자   
           0으로 시작할 경우 0을 떼고 인식하여 오류 발생
   - 문자 : 0으로 시작해도 인식 잘 됨
  - 시간까지 제시시 반드시 포맷 지정
```
TO_NUMBER(문자, [ 포맷 ])
```
- TO_NUMBER
  - 문자타입의 데이터를 숫자타입으로 변환시켜주는 함수
  - Oracle에서 '문자' <-> 숫자 자동형변환   
    ‘,’ 찍혀 있을 경우 자동형변환 X => 에러 발생 => TO_NUMBER로 형변환
#### 2_2_5. NULL 처리 함수
- NVL(컬럼, 해당 컬럼값이 NULL일 경우 반환할 값)
  - 컬럼과 반환할 값의 타입을 맞춰야 함    
- NVL2(컬럼, 반환값1, 반환값2)
  - 컬럼값이 존재할 경우 반환값1 반환
  - 컬럼값이 존재하지 않을 경우 반환값2 반환
- NULLIF(비교대상1, 비교대상2)
  - 두 개의 값이 일치하면 NULL 반환
  - 두 개의 값이 일치하지 않으면 비교대상1 반환
#### 2_2_6. 선택 함수
- DECODE
```
DECODE(비교하고자하는대상컬럼 | 산술연산 | 함수식, 비교값1, 결과값1, 비교값2, 결과값2, ..., 결과값N)
```
- CASE WHEN THEN
```
[표현법1]
CASE WHEN 조건식1 THEN 결과값1
     WHEN 조건식2 THEN 결과값2
     ...
     ELSE 결과값N
END

[표현법2]
CASE 비교대상컬럼 | 산술연산식 | 함수식
     WHEN 비교값1 THEN 결과값1
     WHEN 비교값2 THEN 결과값2
     ...
     ELSE 결과값N
END
```
### 2_3. 그룹 함수
- SUM(NUMBER) : 해당 칼럼 값들의 총 합계를 구해서 반환해주는 함수
- AVG(NUMBER) : 해당 컬럼값들의 평균값을 구해서 반환
- MIN(ANY타입) : 해당 컬럼값들 중에 가장 작은 값 구해서 반환
- MAX(ANY타입) : 해당 컬럼값들 중에 가장 큰 값 구해서 반환
- COUNT(* | 컬럼 | DISTINCT 컬럼 : 행 갯수를 세어서 반환
  - COUNT(*) : 조회될 결과의 모든 행 갯수를 세어서 반환
  - COUNT(컬럼) : 제시한 해당 컬럼값이 NULL이 아닌 것만 행 갯수 세어서 반환
  - COUNT(DISTINCT 컬럼) : 해당 컬럼값을 중복 제거한 후 행 갯수 세어서 반환 (NULL 제외)
